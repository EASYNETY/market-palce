{"ast":null,"code":"import { ADD_PRODUCT_SUCCESS, ADD_PRODUCT_FAILURE } from \"../types\";\nimport axios from \"axios\";\nimport { tokenConfig } from \"../auth-actions/tokenConfig\";\nexport const addProduct = product => (dispatch, getState) => {\n  return new Promise((resolve, reject) => {\n    // send our data as a multipart/form-data instead of application/json\n    const formData = new FormData();\n\n    for (const x in product) {\n      if (x === \"productImage\") {\n        for (let i = 0; i < product.productImage.length; i++) {\n          formData.append(x, product.productImage[i]);\n        }\n      }\n\n      formData.append(\"productImage\", product.productImage);\n    }\n\n    formData.append(\"name\", product.name);\n    formData.append(\"description\", product.description);\n    formData.append(\"category\", product.category);\n    formData.append(\"price\", product.price);\n    formData.append(\"numberInStock\", product.numberInStock);\n    axios.post(\"/api/product/create\", formData, tokenConfig(getState)).then(res => {\n      let newProduct = res.data.product;\n      let successMessage = res.data.message;\n      dispatch(addProductSuccess(newProduct, successMessage));\n      resolve(successMessage);\n    }).catch(error => {\n      dispatch(addProductFailure(error.response));\n      reject(error.response.data.message);\n    });\n  });\n};\n\nconst addProductSuccess = (product, successMessage) => {\n  return {\n    type: ADD_PRODUCT_SUCCESS,\n    payload: {\n      product,\n      successMessage\n    }\n  };\n};\n\nconst addProductFailure = error => {\n  return {\n    type: ADD_PRODUCT_FAILURE,\n    payload: {\n      error\n    }\n  };\n};","map":{"version":3,"names":["ADD_PRODUCT_SUCCESS","ADD_PRODUCT_FAILURE","axios","tokenConfig","addProduct","product","dispatch","getState","Promise","resolve","reject","formData","FormData","x","i","productImage","length","append","name","description","category","price","numberInStock","post","then","res","newProduct","data","successMessage","message","addProductSuccess","catch","error","addProductFailure","response","type","payload"],"sources":["C:/Users/123/Documents/Easynet/Marketplace/m1/views/src/redux/actions/product-actions/addProductAction.js"],"sourcesContent":["import { ADD_PRODUCT_SUCCESS, ADD_PRODUCT_FAILURE } from \"../types\";\nimport axios from \"axios\";\nimport { tokenConfig } from \"../auth-actions/tokenConfig\";\n\nexport const addProduct = product => (dispatch, getState) => {\n  return new Promise((resolve, reject) => {\n    // send our data as a multipart/form-data instead of application/json\n    const formData = new FormData();\n    for (const x in product) {\n      if (x === \"productImage\") {\n        for (let i = 0; i < product.productImage.length; i++) {\n          formData.append(x, product.productImage[i]);\n        }\n      }\n      formData.append(\"productImage\", product.productImage);\n    }\n    formData.append(\"name\", product.name);\n    formData.append(\"description\", product.description);\n    formData.append(\"category\", product.category);\n    formData.append(\"price\", product.price);\n    formData.append(\"numberInStock\", product.numberInStock);\n\n    axios\n      .post(\"/api/product/create\", formData, tokenConfig(getState))\n      .then(res => {\n        let newProduct = res.data.product;\n        let successMessage = res.data.message;\n\n        dispatch(addProductSuccess(newProduct, successMessage));\n        resolve(successMessage);\n      })\n      .catch(error => {\n        dispatch(addProductFailure(error.response));\n        reject(error.response.data.message);\n      });\n  });\n};\n\nconst addProductSuccess = (product, successMessage) => {\n  return {\n    type: ADD_PRODUCT_SUCCESS,\n    payload: {\n      product,\n      successMessage\n    }\n  };\n};\n\nconst addProductFailure = error => {\n  return {\n    type: ADD_PRODUCT_FAILURE,\n    payload: {\n      error\n    }\n  };\n};\n"],"mappings":"AAAA,SAASA,mBAAT,EAA8BC,mBAA9B,QAAyD,UAAzD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,6BAA5B;AAEA,OAAO,MAAMC,UAAU,GAAGC,OAAO,IAAI,CAACC,QAAD,EAAWC,QAAX,KAAwB;EAC3D,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtC;IACA,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;IACA,KAAK,MAAMC,CAAX,IAAgBR,OAAhB,EAAyB;MACvB,IAAIQ,CAAC,KAAK,cAAV,EAA0B;QACxB,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,OAAO,CAACU,YAAR,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;UACpDH,QAAQ,CAACM,MAAT,CAAgBJ,CAAhB,EAAmBR,OAAO,CAACU,YAAR,CAAqBD,CAArB,CAAnB;QACD;MACF;;MACDH,QAAQ,CAACM,MAAT,CAAgB,cAAhB,EAAgCZ,OAAO,CAACU,YAAxC;IACD;;IACDJ,QAAQ,CAACM,MAAT,CAAgB,MAAhB,EAAwBZ,OAAO,CAACa,IAAhC;IACAP,QAAQ,CAACM,MAAT,CAAgB,aAAhB,EAA+BZ,OAAO,CAACc,WAAvC;IACAR,QAAQ,CAACM,MAAT,CAAgB,UAAhB,EAA4BZ,OAAO,CAACe,QAApC;IACAT,QAAQ,CAACM,MAAT,CAAgB,OAAhB,EAAyBZ,OAAO,CAACgB,KAAjC;IACAV,QAAQ,CAACM,MAAT,CAAgB,eAAhB,EAAiCZ,OAAO,CAACiB,aAAzC;IAEApB,KAAK,CACFqB,IADH,CACQ,qBADR,EAC+BZ,QAD/B,EACyCR,WAAW,CAACI,QAAD,CADpD,EAEGiB,IAFH,CAEQC,GAAG,IAAI;MACX,IAAIC,UAAU,GAAGD,GAAG,CAACE,IAAJ,CAAStB,OAA1B;MACA,IAAIuB,cAAc,GAAGH,GAAG,CAACE,IAAJ,CAASE,OAA9B;MAEAvB,QAAQ,CAACwB,iBAAiB,CAACJ,UAAD,EAAaE,cAAb,CAAlB,CAAR;MACAnB,OAAO,CAACmB,cAAD,CAAP;IACD,CARH,EASGG,KATH,CASSC,KAAK,IAAI;MACd1B,QAAQ,CAAC2B,iBAAiB,CAACD,KAAK,CAACE,QAAP,CAAlB,CAAR;MACAxB,MAAM,CAACsB,KAAK,CAACE,QAAN,CAAeP,IAAf,CAAoBE,OAArB,CAAN;IACD,CAZH;EAaD,CA9BM,CAAP;AA+BD,CAhCM;;AAkCP,MAAMC,iBAAiB,GAAG,CAACzB,OAAD,EAAUuB,cAAV,KAA6B;EACrD,OAAO;IACLO,IAAI,EAAEnC,mBADD;IAELoC,OAAO,EAAE;MACP/B,OADO;MAEPuB;IAFO;EAFJ,CAAP;AAOD,CARD;;AAUA,MAAMK,iBAAiB,GAAGD,KAAK,IAAI;EACjC,OAAO;IACLG,IAAI,EAAElC,mBADD;IAELmC,OAAO,EAAE;MACPJ;IADO;EAFJ,CAAP;AAMD,CAPD"},"metadata":{},"sourceType":"module"}