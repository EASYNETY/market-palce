{"ast":null,"code":"import { UPDATE_PRODUCT_SUCCESS, UPDATE_PRODUCT_FAILURE } from \"./../types\";\nimport axios from \"axios\";\nimport { tokenConfig } from \"./../auth-actions/tokenConfig\";\nexport const updateProduct = (id, product) => (dispatch, getState) => {\n  return new Promise((reslove, reject) => {\n    // send our data as a multipart/form-data instead of application/json\n    const formData = new FormData();\n\n    for (const x in product) {\n      if (x === \"productImage\") {\n        for (let i = 0; i < product.productImage.length; i++) {\n          formData.append(x, product.productImage[i]);\n        }\n      }\n\n      formData.append(\"productImage\", product.productImage);\n    }\n\n    formData.append(\"name\", product.name);\n    formData.append(\"description\", product.description);\n    formData.append(\"category\", product.category);\n    formData.append(\"price\", product.price);\n    formData.append(\"numberInStock\", product.numberInStock);\n    axios.post(`/api/product/${id}/update`, formData, tokenConfig(getState)).then(res => {\n      let newProduct = res.data.product;\n      let successMessage = res.data.message;\n      dispatch(updateProductSuccess(id, newProduct, successMessage));\n      reslove(successMessage);\n    }).catch(err => {\n      let errorMessage = err.response.data.message;\n      dispatch(updateProductFailure(errorMessage));\n      reject(errorMessage);\n    });\n  });\n};\n\nconst updateProductSuccess = (id, newProduct, successMessage) => {\n  return {\n    type: UPDATE_PRODUCT_SUCCESS,\n    payload: {\n      id,\n      newProduct,\n      successMessage\n    }\n  };\n};\n\nconst updateProductFailure = error => {\n  return {\n    type: UPDATE_PRODUCT_FAILURE,\n    payload: {\n      error\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/123/Documents/Easynet/Marketplace/m1/views/src/redux/actions/product-actions/updateProductAction.js"],"names":["UPDATE_PRODUCT_SUCCESS","UPDATE_PRODUCT_FAILURE","axios","tokenConfig","updateProduct","id","product","dispatch","getState","Promise","reslove","reject","formData","FormData","x","i","productImage","length","append","name","description","category","price","numberInStock","post","then","res","newProduct","data","successMessage","message","updateProductSuccess","catch","err","errorMessage","response","updateProductFailure","type","payload","error"],"mappings":"AAAA,SAASA,sBAAT,EAAiCC,sBAAjC,QAA+D,YAA/D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,+BAA5B;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,EAAD,EAAKC,OAAL,KAAiB,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACpE,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AACA,SAAK,MAAMC,CAAX,IAAgBR,OAAhB,EAAyB;AACvB,UAAIQ,CAAC,KAAK,cAAV,EAA0B;AACxB,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,OAAO,CAACU,YAAR,CAAqBC,MAAzC,EAAiDF,CAAC,EAAlD,EAAsD;AACpDH,UAAAA,QAAQ,CAACM,MAAT,CAAgBJ,CAAhB,EAAmBR,OAAO,CAACU,YAAR,CAAqBD,CAArB,CAAnB;AACD;AACF;;AACDH,MAAAA,QAAQ,CAACM,MAAT,CAAgB,cAAhB,EAAgCZ,OAAO,CAACU,YAAxC;AACD;;AACDJ,IAAAA,QAAQ,CAACM,MAAT,CAAgB,MAAhB,EAAwBZ,OAAO,CAACa,IAAhC;AACAP,IAAAA,QAAQ,CAACM,MAAT,CAAgB,aAAhB,EAA+BZ,OAAO,CAACc,WAAvC;AACAR,IAAAA,QAAQ,CAACM,MAAT,CAAgB,UAAhB,EAA4BZ,OAAO,CAACe,QAApC;AACAT,IAAAA,QAAQ,CAACM,MAAT,CAAgB,OAAhB,EAAyBZ,OAAO,CAACgB,KAAjC;AACAV,IAAAA,QAAQ,CAACM,MAAT,CAAgB,eAAhB,EAAiCZ,OAAO,CAACiB,aAAzC;AAEArB,IAAAA,KAAK,CACFsB,IADH,CACS,gBAAenB,EAAG,SAD3B,EACqCO,QADrC,EAC+CT,WAAW,CAACK,QAAD,CAD1D,EAEGiB,IAFH,CAEQC,GAAG,IAAI;AACX,UAAIC,UAAU,GAAGD,GAAG,CAACE,IAAJ,CAAStB,OAA1B;AACA,UAAIuB,cAAc,GAAGH,GAAG,CAACE,IAAJ,CAASE,OAA9B;AAEAvB,MAAAA,QAAQ,CAACwB,oBAAoB,CAAC1B,EAAD,EAAKsB,UAAL,EAAiBE,cAAjB,CAArB,CAAR;AACAnB,MAAAA,OAAO,CAACmB,cAAD,CAAP;AACD,KARH,EASGG,KATH,CASSC,GAAG,IAAI;AACZ,UAAIC,YAAY,GAAGD,GAAG,CAACE,QAAJ,CAAaP,IAAb,CAAkBE,OAArC;AAEAvB,MAAAA,QAAQ,CAAC6B,oBAAoB,CAACF,YAAD,CAArB,CAAR;AACAvB,MAAAA,MAAM,CAACuB,YAAD,CAAN;AACD,KAdH;AAeD,GAhCM,CAAP;AAiCD,CAlCM;;AAoCP,MAAMH,oBAAoB,GAAG,CAAC1B,EAAD,EAAKsB,UAAL,EAAiBE,cAAjB,KAAoC;AAC/D,SAAO;AACLQ,IAAAA,IAAI,EAAErC,sBADD;AAELsC,IAAAA,OAAO,EAAE;AACPjC,MAAAA,EADO;AAEPsB,MAAAA,UAFO;AAGPE,MAAAA;AAHO;AAFJ,GAAP;AAQD,CATD;;AAWA,MAAMO,oBAAoB,GAAGG,KAAK,IAAI;AACpC,SAAO;AACLF,IAAAA,IAAI,EAAEpC,sBADD;AAELqC,IAAAA,OAAO,EAAE;AACPC,MAAAA;AADO;AAFJ,GAAP;AAMD,CAPD","sourcesContent":["import { UPDATE_PRODUCT_SUCCESS, UPDATE_PRODUCT_FAILURE } from \"./../types\";\nimport axios from \"axios\";\nimport { tokenConfig } from \"./../auth-actions/tokenConfig\";\n\nexport const updateProduct = (id, product) => (dispatch, getState) => {\n  return new Promise((reslove, reject) => {\n    // send our data as a multipart/form-data instead of application/json\n    const formData = new FormData();\n    for (const x in product) {\n      if (x === \"productImage\") {\n        for (let i = 0; i < product.productImage.length; i++) {\n          formData.append(x, product.productImage[i]);\n        }\n      }\n      formData.append(\"productImage\", product.productImage);\n    }\n    formData.append(\"name\", product.name);\n    formData.append(\"description\", product.description);\n    formData.append(\"category\", product.category);\n    formData.append(\"price\", product.price);\n    formData.append(\"numberInStock\", product.numberInStock);\n\n    axios\n      .post(`/api/product/${id}/update`, formData, tokenConfig(getState))\n      .then(res => {\n        let newProduct = res.data.product;\n        let successMessage = res.data.message;\n\n        dispatch(updateProductSuccess(id, newProduct, successMessage));\n        reslove(successMessage);\n      })\n      .catch(err => {\n        let errorMessage = err.response.data.message;\n\n        dispatch(updateProductFailure(errorMessage));\n        reject(errorMessage);\n      });\n  });\n};\n\nconst updateProductSuccess = (id, newProduct, successMessage) => {\n  return {\n    type: UPDATE_PRODUCT_SUCCESS,\n    payload: {\n      id,\n      newProduct,\n      successMessage\n    }\n  };\n};\n\nconst updateProductFailure = error => {\n  return {\n    type: UPDATE_PRODUCT_FAILURE,\n    payload: {\n      error\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}