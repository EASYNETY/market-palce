{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\123\\\\Documents\\\\Easynet\\\\Marketplace\\\\m1\\\\views\\\\src\\\\components\\\\SingleProduct.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchSingleProductAction } from \"../redux/actions/product-actions/fetchSingleProductAction\";\nimport { toast, Slide as toastSlide } from \"react-toastify\";\nimport { addToCart } from \"./../redux/actions/cart-actions/addToCart\";\nimport { addToWishlist } from \"./../redux/actions/wishlist-actions/addToWishlist\";\nimport ProductsCarousel from \"./home-page/ProductsCarousel\";\nimport Page404 from \"./404\";\nimport { Link } from \"react-router-dom\";\nimport ExploreMore from \"./home-page/ExploreMore\";\nimport Loader from \"react-loader-spinner\";\nimport { CarouselProvider, Slider, Slide, ImageWithZoom, Dot, Image } from \"pure-react-carousel\";\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\n\nfunction SingleProduct(props) {\n  const [orderQuantity, setOrderQuantity] = useState(0); // import product, loading, error from redux store\n\n  const {\n    product,\n    loading,\n    error\n  } = useSelector(state => state.singleProducttt);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchSingleProductAction(props.match.params.id));\n  }, [dispatch, props.match.params.id]); // just in case someone deleted a category\n\n  const prodCategory = () => {\n    if (product.category !== null) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: \"product-category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }, \"Category:\", \" \", /*#__PURE__*/React.createElement(Link, {\n        to: `/category/${product.category._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }\n      }, product.category.name));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product-category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 14\n        }\n      }, \"Category: undefined \\\"will edit soon\\\"\");\n    }\n  }; // to return options with just order in stock\n\n\n  let numberInStock = product.numberInStock;\n\n  function options() {\n    let arr = [];\n\n    for (let i = 1; i <= numberInStock; i++) {\n      arr.push( /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, i));\n    }\n\n    return arr;\n  } // handle add to cart and wishlist\n\n\n  const addTo = addFunction => {\n    dispatch(addFunction).then(res => {\n      toast.success(res, {\n        position: toast.POSITION.BOTTOM_LEFT,\n        transition: toastSlide\n      });\n    }).catch(err => {\n      toast.error(err, {\n        position: toast.POSITION.BOTTOM_LEFT,\n        autoClose: false\n      });\n    });\n  }; // if the user request an id that doesn't exist, render 404 page\n  // else the id does exist, render everything normal\n\n\n  if (error === \"Request failed with status code 404\") {\n    return /*#__PURE__*/React.createElement(Page404, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 12\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      className: \"single-product-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, loading && /*#__PURE__*/React.createElement(Loader, {\n      type: \"Circles\",\n      color: \"#123\",\n      height: 100,\n      width: 100,\n      className: \"dashboard-spinner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }), error && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, error), product.category !== undefined && /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"6\",\n      sm: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CarouselProvider, {\n      naturalSlideWidth: 90,\n      naturalSlideHeight: 90,\n      hasMasterSpinner: \"true\",\n      totalSlides: product.productImage.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Slider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, product.productImage.map((image, index) => {\n      //let imgPath = image.path.replace(/\\\\/g, \"/\");\n      return /*#__PURE__*/React.createElement(Slide, {\n        index: index,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ImageWithZoom, {\n        className: \"d-block w-100 product-card-image\",\n        src: image,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }));\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"down\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }, \"Roll over image to zoom in\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"all-dots\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, product.productImage.map((image, index) => {\n      return /*#__PURE__*/React.createElement(Dot, {\n        slide: index,\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        className: \"d-block w-100 product-card-image\",\n        src: image,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }\n      }));\n    })))), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"product-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sold-by\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }, \"by \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 20\n      }\n    }, product.seller.username)), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    }, \"$\", product.price)), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-heart-o add-to-wish-list\",\n      onClick: () => {\n        addTo(addToWishlist(product._id));\n      },\n      \"aria-hidden\": \"true\",\n      title: \"Add to wish list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"product-desc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, \"Description: \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 30\n      }\n    }, product.description)), product.numberInStock < 67 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-stock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, \"only \", product.numberInStock, \" left in Stock, order soon.\"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"order-quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, \"Quantity:\"), /*#__PURE__*/React.createElement(\"select\", {\n      className: \"browser-default custom-select\",\n      onChange: e => {\n        setOrderQuantity(e.target.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, \"QTY\"), options())), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"add-to-cart\",\n      variant: \"secondary\",\n      onClick: () => {\n        let quantity = {\n          orderQuantity\n        };\n        addTo(addToCart(product._id, quantity));\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, \"Add to cart\"))), prodCategory())), /*#__PURE__*/React.createElement(ProductsCarousel, {\n      title: \"Similar Products\",\n      productsNumber: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ExploreMore, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }));\n  }\n}\n\nexport default SingleProduct;","map":{"version":3,"sources":["C:/Users/123/Documents/Easynet/Marketplace/m1/views/src/components/SingleProduct.js"],"names":["React","useEffect","useState","Container","Row","Col","Button","useSelector","useDispatch","fetchSingleProductAction","toast","Slide","toastSlide","addToCart","addToWishlist","ProductsCarousel","Page404","Link","ExploreMore","Loader","CarouselProvider","Slider","ImageWithZoom","Dot","Image","SingleProduct","props","orderQuantity","setOrderQuantity","product","loading","error","state","singleProducttt","dispatch","match","params","id","prodCategory","category","_id","name","numberInStock","options","arr","i","push","addTo","addFunction","then","res","success","position","POSITION","BOTTOM_LEFT","transition","catch","err","autoClose","undefined","productImage","length","map","image","index","seller","username","price","description","e","target","value","quantity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { fetchSingleProductAction } from \"../redux/actions/product-actions/fetchSingleProductAction\";\nimport { toast, Slide as toastSlide } from \"react-toastify\";\nimport { addToCart } from \"./../redux/actions/cart-actions/addToCart\";\nimport { addToWishlist } from \"./../redux/actions/wishlist-actions/addToWishlist\";\nimport ProductsCarousel from \"./home-page/ProductsCarousel\";\nimport Page404 from \"./404\";\nimport { Link } from \"react-router-dom\";\nimport ExploreMore from \"./home-page/ExploreMore\";\nimport Loader from \"react-loader-spinner\";\nimport {\n  CarouselProvider,\n  Slider,\n  Slide,\n  ImageWithZoom,\n  Dot,\n  Image\n} from \"pure-react-carousel\";\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\n\nfunction SingleProduct(props) {\n  const [orderQuantity, setOrderQuantity] = useState(0);\n\n  // import product, loading, error from redux store\n  const { product, loading, error } = useSelector(state => state.singleProducttt);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchSingleProductAction(props.match.params.id));\n  }, [dispatch, props.match.params.id]);\n\n  // just in case someone deleted a category\n  const prodCategory = () => {\n    if (product.category !== null) {\n      return (\n        <p className='product-category'>\n          Category:{\" \"}\n          <Link to={`/category/${product.category._id}`}>{product.category.name}</Link>\n        </p>\n      );\n    } else {\n      return <div className='product-category'>Category: undefined \"will edit soon\"</div>;\n    }\n  };\n\n  // to return options with just order in stock\n  let numberInStock = product.numberInStock;\n  function options() {\n    let arr = [];\n\n    for (let i = 1; i <= numberInStock; i++) {\n      arr.push(\n        <option key={i} value={i}>\n          {i}\n        </option>\n      );\n    }\n\n    return arr;\n  }\n\n  // handle add to cart and wishlist\n  const addTo = addFunction => {\n    dispatch(addFunction)\n      .then(res => {\n        toast.success(res, {\n          position: toast.POSITION.BOTTOM_LEFT,\n          transition: toastSlide\n        });\n      })\n      .catch(err => {\n        toast.error(err, {\n          position: toast.POSITION.BOTTOM_LEFT,\n          autoClose: false\n        });\n      });\n  };\n\n  // if the user request an id that doesn't exist, render 404 page\n  // else the id does exist, render everything normal\n  if (error === \"Request failed with status code 404\") {\n    return <Page404 />;\n  } else {\n    return (\n      <Container fluid className='single-product-page'>\n        {loading && (\n          <Loader\n            type='Circles'\n            color='#123'\n            height={100}\n            width={100}\n            className='dashboard-spinner'\n          />\n        )}\n        {error && <div>{error}</div>}\n        {product.category !== undefined && (\n          <Row>\n            <Col md='6' sm='12'>\n              <CarouselProvider\n                naturalSlideWidth={90}\n                naturalSlideHeight={90}\n                hasMasterSpinner='true'\n                totalSlides={product.productImage.length}>\n                <Slider>\n                  {product.productImage.map((image, index) => {\n                    //let imgPath = image.path.replace(/\\\\/g, \"/\");\n                    return (\n                      <Slide index={index} key={index}>\n                        <ImageWithZoom\n                          className='d-block w-100 product-card-image'\n                          src={image}\n                        />\n                      </Slide>\n                    );\n                  })}\n                  <div className='down'>Roll over image to zoom in</div>\n                </Slider>\n\n                <div className='all-dots'>\n                  {product.productImage.map((image, index) => {\n                    return (\n                      <Dot slide={index} key={index}>\n                        <Image className='d-block w-100 product-card-image' src={image} />\n                      </Dot>\n                    );\n                  })}\n                </div>\n              </CarouselProvider>\n            </Col>\n\n            {/* *** Product Details *** */}\n            <Col>\n              <span className='product-name'>{product.name}</span>\n\n              <p className='sold-by'>\n                by <span>{product.seller.username}</span>\n              </p>\n\n              <Row>\n                <Col>\n                  <div className='product-price'>${product.price}</div>\n                </Col>\n                <Col>\n                  <i\n                    className='fa fa-heart-o add-to-wish-list'\n                    onClick={() => {\n                      addTo(addToWishlist(product._id));\n                    }}\n                    aria-hidden='true'\n                    title='Add to wish list'></i>\n                </Col>\n              </Row>\n\n              <p className='product-desc'>\n                Description: <span>{product.description}</span>\n              </p>\n\n              {product.numberInStock < 67 && (\n                <div className='product-stock'>\n                  only {product.numberInStock} left in Stock, order soon.\n                </div>\n              )}\n\n              <Row>\n                <Col className='order-quantity'>\n                  <span>Quantity:</span>\n                  <select\n                    className='browser-default custom-select'\n                    onChange={e => {\n                      setOrderQuantity(e.target.value);\n                    }}>\n                    <option value={0}>QTY</option>\n                    {options()}\n                  </select>\n                </Col>\n                <Col>\n                  <Button\n                    className='add-to-cart'\n                    variant='secondary'\n                    onClick={() => {\n                      let quantity = { orderQuantity };\n                      addTo(addToCart(product._id, quantity));\n                    }}>\n                    Add to cart\n                  </Button>\n                </Col>\n              </Row>\n\n              {prodCategory()}\n            </Col>\n          </Row>\n        )}\n\n        <ProductsCarousel title='Similar Products' productsNumber='4' />\n        <ExploreMore />\n      </Container>\n    );\n  }\n}\n\nexport default SingleProduct;\n"]},"metadata":{},"sourceType":"module"}